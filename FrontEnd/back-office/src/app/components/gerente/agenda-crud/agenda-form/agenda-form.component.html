<fieldset>
  <legend>{{titulo}}</legend>

  <form [formGroup]="registerForm" (ngSubmit)="salvar()" class="mt-3 mb-3">

    <div class="form-group row mt-2">
      <label for="txtData" class="col-sm-1 col-form-label">Data</label>
      <div class="col-sm-2">
        <input type="date" formControlName="data" class="form-control" title="Digite a data da agenda"
          [(ngModel)]="agenda.data"
          [ngClass]="{ 'is-invalid': submitted && f.data.errors }" />
        <div *ngIf="submitted && f.data.errors" class="invalid-feedback">
          <div *ngIf="f.data.errors.required">Data é obrigatório</div>
          <div *ngIf="f.data.errors.pattern">A data deve ser uma data válida no formato DD-MM-AAAA</div>
        </div>
      </div>
    </div>

    <div class="form-group row mt-2">
      <label for="sltLote" class="col-sm-1 col-form-label">Lote</label>
      <div class="col-sm-2">
        <select class="form-control" id="sltLote" formControlName="lote"
          [(ngModel)]="agenda.idLote"
          [ngClass]="{ 'is-invalid': submitted && f.lote.errors }">
          <option *ngFor="let lote of lotes" [value]="lote.id" [attr.selected]="lote.selecionado ? true : null" >{{lote.numero}}</option>
        </select>
        <div *ngIf="submitted && f.lote.errors" class="invalid-feedback">
            <div *ngIf="f.lote.errors">Lote é obrigatório</div>
        </div>
      </div>
    </div>

    <div class="form-group row mt-2">
      <label for="ckbManha" class="col-sm-1 col-form-label">Manhã</label>
      <div class="col-sm-1 mt-2">
        <input type="checkbox" formControlName="manha" id="ckbManha" class="form-check-input"
        [(ngModel)]="agenda.manha"
        (ngModelChange)="habilitaQtd('m')" />
      </div>
      <label for="txtQtdManha" class="col-sm-3 col-form-label">Quantidade de doses para manhã</label>
      <div class="col-sm-4">
        <input type="text" class="form-control w-25" id="txtQtdManha" formControlName="quantidadeManha"
          title="Digite a quantidade de doses para manhã" [readonly]="!agenda.manha"
          [(ngModel)]="agenda.quantidadeManha"
          [ngClass]="{ 'is-invalid': submitted && f.quantidadeManha.errors }">

        <div *ngIf="submitted && f.quantidadeManha.errors" class="invalid-feedback">
          <div *ngIf="f.quantidadeManha.errors.required">Quantidade de doses para manhã é obrigatório</div>
        </div>
      </div>

    </div>

    <div class="form-group row mt-2">
      <label for="ckbTarde" class="col-sm-1 col-form-label">Tarde</label>
      <div class="col-sm-1 mt-2">
        <input type="checkbox" formControlName="tarde" id="ckbTarde" class="form-check-input"
        [(ngModel)]="agenda.tarde"
        (ngModelChange)="habilitaQtd('t')"/>
      </div>
      <label for="txtQtdTarde" class="col-sm-3 col-form-label">Quantidade de doses para tarde</label>
      <div class="col-sm-4">
        <input type="text" class="form-control w-25" id="txtQtdTarde" formControlName="quantidadeTarde"
          title="Digite a quantidade de doses para tarde" [readonly]="!agenda.tarde"
          [(ngModel)]="agenda.quantidadeTarde"
          [ngClass]="{ 'is-invalid': submitted && f.quantidadeTarde.errors }">
        <div *ngIf="submitted && f.quantidadeTarde.errors" class="invalid-feedback">
          <div *ngIf="f.quantidadeTarde.errors.required">Quantidade de doses para tarde é obrigatório</div>
        </div>
      </div>
    </div>
  </form>

  <button class="btn btn-sm btn-outline-secondary" (click)="retornaGrid()">Retornar</button>&nbsp;
  <button class="btn btn-sm btn-outline-primary" (click)="salvar()">Salvar</button>

</fieldset>
